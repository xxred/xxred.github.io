<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>aspnetcore 中使用 Newlife.IdentityServer4 管理 IdentityServer 数据 | xxred&#39;s notes</title>
    <meta name="description" content="记录学习过程，收集学习资源">
    <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3ab1ff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/logo.jpg">
  <meta name="msapplication-TileImage" content="/logo.jpg">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.5203916d.css" as="style"><link rel="preload" href="/assets/js/app.6bc962bd.js" as="script"><link rel="preload" href="/assets/js/2.968fe051.js" as="script"><link rel="preload" href="/assets/js/55.600a1096.js" as="script"><link rel="prefetch" href="/assets/js/10.44142c8c.js"><link rel="prefetch" href="/assets/js/100.fa01a89c.js"><link rel="prefetch" href="/assets/js/101.829be5e7.js"><link rel="prefetch" href="/assets/js/102.593a0911.js"><link rel="prefetch" href="/assets/js/103.c435d4df.js"><link rel="prefetch" href="/assets/js/104.c61abbb5.js"><link rel="prefetch" href="/assets/js/105.2bf5fe07.js"><link rel="prefetch" href="/assets/js/106.cd2fd480.js"><link rel="prefetch" href="/assets/js/107.a916822b.js"><link rel="prefetch" href="/assets/js/108.0cba454b.js"><link rel="prefetch" href="/assets/js/109.a383b2dc.js"><link rel="prefetch" href="/assets/js/11.9545e68d.js"><link rel="prefetch" href="/assets/js/110.70d280ad.js"><link rel="prefetch" href="/assets/js/111.7bdc49be.js"><link rel="prefetch" href="/assets/js/112.fbda4da3.js"><link rel="prefetch" href="/assets/js/113.cbe75f0b.js"><link rel="prefetch" href="/assets/js/114.58d7e344.js"><link rel="prefetch" href="/assets/js/115.d1d8f294.js"><link rel="prefetch" href="/assets/js/116.791e7b4c.js"><link rel="prefetch" href="/assets/js/117.bb3f938a.js"><link rel="prefetch" href="/assets/js/118.f2954a67.js"><link rel="prefetch" href="/assets/js/119.a19d3d59.js"><link rel="prefetch" href="/assets/js/12.1be4fee6.js"><link rel="prefetch" href="/assets/js/120.344b5233.js"><link rel="prefetch" href="/assets/js/121.ee98d672.js"><link rel="prefetch" href="/assets/js/122.d2208130.js"><link rel="prefetch" href="/assets/js/123.3987dd76.js"><link rel="prefetch" href="/assets/js/124.0d72af62.js"><link rel="prefetch" href="/assets/js/125.77cad016.js"><link rel="prefetch" href="/assets/js/13.857ab341.js"><link rel="prefetch" href="/assets/js/14.c28e39fe.js"><link rel="prefetch" href="/assets/js/15.6a2c93b5.js"><link rel="prefetch" href="/assets/js/16.7f1e8b6a.js"><link rel="prefetch" href="/assets/js/17.6b0e06d7.js"><link rel="prefetch" href="/assets/js/18.c57c8642.js"><link rel="prefetch" href="/assets/js/19.dc1a29f1.js"><link rel="prefetch" href="/assets/js/20.402aeb57.js"><link rel="prefetch" href="/assets/js/21.c81d018f.js"><link rel="prefetch" href="/assets/js/22.5e4672e3.js"><link rel="prefetch" href="/assets/js/23.4cef000b.js"><link rel="prefetch" href="/assets/js/24.3a829f0e.js"><link rel="prefetch" href="/assets/js/25.d957ac03.js"><link rel="prefetch" href="/assets/js/26.cc1c6e83.js"><link rel="prefetch" href="/assets/js/27.60abf10d.js"><link rel="prefetch" href="/assets/js/28.9d8a1907.js"><link rel="prefetch" href="/assets/js/29.90c16c9a.js"><link rel="prefetch" href="/assets/js/3.fb6ecb76.js"><link rel="prefetch" href="/assets/js/30.a4af176c.js"><link rel="prefetch" href="/assets/js/31.3e1cf8e9.js"><link rel="prefetch" href="/assets/js/32.52d3d05c.js"><link rel="prefetch" href="/assets/js/33.6e9e2cba.js"><link rel="prefetch" href="/assets/js/34.ef596089.js"><link rel="prefetch" href="/assets/js/35.2a633b20.js"><link rel="prefetch" href="/assets/js/36.0481fffe.js"><link rel="prefetch" href="/assets/js/37.f97385f8.js"><link rel="prefetch" href="/assets/js/38.61a460f9.js"><link rel="prefetch" href="/assets/js/39.b6a34a6e.js"><link rel="prefetch" href="/assets/js/4.9db1ddbb.js"><link rel="prefetch" href="/assets/js/40.3c3a7b30.js"><link rel="prefetch" href="/assets/js/41.414a203c.js"><link rel="prefetch" href="/assets/js/42.fa35959e.js"><link rel="prefetch" href="/assets/js/43.5137f653.js"><link rel="prefetch" href="/assets/js/44.106a53d3.js"><link rel="prefetch" href="/assets/js/45.b4b888e5.js"><link rel="prefetch" href="/assets/js/46.1c9d3065.js"><link rel="prefetch" href="/assets/js/47.5b8fe47c.js"><link rel="prefetch" href="/assets/js/48.e57bc9c4.js"><link rel="prefetch" href="/assets/js/49.c0803beb.js"><link rel="prefetch" href="/assets/js/5.509d06a8.js"><link rel="prefetch" href="/assets/js/50.306ad84d.js"><link rel="prefetch" href="/assets/js/51.1db9ee02.js"><link rel="prefetch" href="/assets/js/52.8de1bc76.js"><link rel="prefetch" href="/assets/js/53.a86cc3ca.js"><link rel="prefetch" href="/assets/js/54.4b1b42b7.js"><link rel="prefetch" href="/assets/js/56.a6c41d15.js"><link rel="prefetch" href="/assets/js/57.cd83dffd.js"><link rel="prefetch" href="/assets/js/58.700c6a83.js"><link rel="prefetch" href="/assets/js/59.e809e8ea.js"><link rel="prefetch" href="/assets/js/6.db0e0a89.js"><link rel="prefetch" href="/assets/js/60.badd14ad.js"><link rel="prefetch" href="/assets/js/61.65d73c38.js"><link rel="prefetch" href="/assets/js/62.3a722109.js"><link rel="prefetch" href="/assets/js/63.1d3d8ad9.js"><link rel="prefetch" href="/assets/js/64.161f74d6.js"><link rel="prefetch" href="/assets/js/65.aa0c3c44.js"><link rel="prefetch" href="/assets/js/66.5b8023e0.js"><link rel="prefetch" href="/assets/js/67.aea5063a.js"><link rel="prefetch" href="/assets/js/68.4c088c34.js"><link rel="prefetch" href="/assets/js/69.9ec647ff.js"><link rel="prefetch" href="/assets/js/7.2da78329.js"><link rel="prefetch" href="/assets/js/70.03603f48.js"><link rel="prefetch" href="/assets/js/71.14395698.js"><link rel="prefetch" href="/assets/js/72.a6d346ff.js"><link rel="prefetch" href="/assets/js/73.444d27b0.js"><link rel="prefetch" href="/assets/js/74.8d93b5d2.js"><link rel="prefetch" href="/assets/js/75.3b745354.js"><link rel="prefetch" href="/assets/js/76.f2512890.js"><link rel="prefetch" href="/assets/js/77.75b871c9.js"><link rel="prefetch" href="/assets/js/78.c87d124e.js"><link rel="prefetch" href="/assets/js/79.1b113212.js"><link rel="prefetch" href="/assets/js/8.92ec3027.js"><link rel="prefetch" href="/assets/js/80.f911fee7.js"><link rel="prefetch" href="/assets/js/81.0e19d377.js"><link rel="prefetch" href="/assets/js/82.c05b9ef0.js"><link rel="prefetch" href="/assets/js/83.8dc5867b.js"><link rel="prefetch" href="/assets/js/84.42371abf.js"><link rel="prefetch" href="/assets/js/85.73abd118.js"><link rel="prefetch" href="/assets/js/86.f4e9719d.js"><link rel="prefetch" href="/assets/js/87.4cebdacb.js"><link rel="prefetch" href="/assets/js/88.c4b91f07.js"><link rel="prefetch" href="/assets/js/89.f03c78a5.js"><link rel="prefetch" href="/assets/js/9.a83adfd8.js"><link rel="prefetch" href="/assets/js/90.0574bd2c.js"><link rel="prefetch" href="/assets/js/91.7f902e2b.js"><link rel="prefetch" href="/assets/js/92.72b15497.js"><link rel="prefetch" href="/assets/js/93.2cb21d01.js"><link rel="prefetch" href="/assets/js/94.03f91a3c.js"><link rel="prefetch" href="/assets/js/95.fa391b4b.js"><link rel="prefetch" href="/assets/js/96.e281c41d.js"><link rel="prefetch" href="/assets/js/97.df3002b9.js"><link rel="prefetch" href="/assets/js/98.4e5705e9.js"><link rel="prefetch" href="/assets/js/99.56cba6f3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5203916d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">xxred's notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">.Net Core</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dotnet-core/dotnetcore/" class="nav-link">.Net Core</a></li><li class="dropdown-item"><!----> <a href="/dotnet-core/aspnetcore/" class="nav-link router-link-active">Asp.Net Core</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end/nodejs/" class="nav-link">nodejs</a></li><li class="dropdown-item"><!----> <a href="/front-end/vuejs/" class="nav-link">vuejs</a></li><li class="dropdown-item"><!----> <a href="/front-end/iview/" class="nav-link">iview</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/programing-language/csharp/" class="nav-link">C#</a></li><li class="dropdown-item"><!----> <a href="/programing-language/powershell/" class="nav-link">PowerShell</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">编程基础</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/character-coding/" class="nav-link">字符编码</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/operating-system/windows/" class="nav-link">Windows</a></li><li class="dropdown-item"><!----> <a href="/operating-system/linux/" class="nav-link">Linux</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>开发工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dev-tool/visualstudio/" class="nav-link">Visual Studio</a></li><li class="dropdown-subitem"><a href="/dev-tool/visualstudio-code/" class="nav-link">Visual Studio Code</a></li></ul></li><li class="dropdown-item"><h4>文档工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/tools/doc/docfx/" class="nav-link">DocFX</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/awesome-collection/" class="nav-link">资源收集</a></div> <a href="https://github.com/xxred/xxred.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">.Net Core</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dotnet-core/dotnetcore/" class="nav-link">.Net Core</a></li><li class="dropdown-item"><!----> <a href="/dotnet-core/aspnetcore/" class="nav-link router-link-active">Asp.Net Core</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end/nodejs/" class="nav-link">nodejs</a></li><li class="dropdown-item"><!----> <a href="/front-end/vuejs/" class="nav-link">vuejs</a></li><li class="dropdown-item"><!----> <a href="/front-end/iview/" class="nav-link">iview</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">编程语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/programing-language/csharp/" class="nav-link">C#</a></li><li class="dropdown-item"><!----> <a href="/programing-language/powershell/" class="nav-link">PowerShell</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">编程基础</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/character-coding/" class="nav-link">字符编码</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/operating-system/windows/" class="nav-link">Windows</a></li><li class="dropdown-item"><!----> <a href="/operating-system/linux/" class="nav-link">Linux</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>开发工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dev-tool/visualstudio/" class="nav-link">Visual Studio</a></li><li class="dropdown-subitem"><a href="/dev-tool/visualstudio-code/" class="nav-link">Visual Studio Code</a></li></ul></li><li class="dropdown-item"><h4>文档工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/tools/doc/docfx/" class="nav-link">DocFX</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/awesome-collection/" class="nav-link">资源收集</a></div> <a href="https://github.com/xxred/xxred.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>aspnetcore</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dotnet-core/aspnetcore/" class="sidebar-link">asp.net core</a></li><li><a href="/dotnet-core/aspnetcore/asp.net core移植.html" class="sidebar-link">asp.net core移植</a></li><li><a href="/dotnet-core/aspnetcore/health-checks.html" class="sidebar-link">asp.net core 健康检查</a></li><li><a href="/dotnet-core/aspnetcore/newlife-identityserver4-in-aspnetcore.html" class="active sidebar-link">aspnetcore 中使用 Newlife.IdentityServer4 管理 IdentityServer 数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dotnet-core/aspnetcore/newlife-identityserver4-in-aspnetcore.html#后端" class="sidebar-link">后端</a></li><li class="sidebar-sub-header"><a href="/dotnet-core/aspnetcore/newlife-identityserver4-in-aspnetcore.html#前端" class="sidebar-link">前端</a></li><li class="sidebar-sub-header"><a href="/dotnet-core/aspnetcore/newlife-identityserver4-in-aspnetcore.html#最后" class="sidebar-link">最后</a></li><li class="sidebar-sub-header"><a href="/dotnet-core/aspnetcore/newlife-identityserver4-in-aspnetcore.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/dotnet-core/aspnetcore/persistence-identity-server-4-with-newLife-xcode.html" class="sidebar-link">使用 NewLife.XCode 持久化 IdentityServer4</a></li><li><a href="/dotnet-core/aspnetcore/razor-page-library.html" class="sidebar-link">Razor Page Libary</a></li><li><a href="/dotnet-core/aspnetcore/release.html" class="sidebar-link">发布</a></li><li><a href="/dotnet-core/aspnetcore/中间件.html" class="sidebar-link">asp.net core mvc 管道之中间件</a></li><li><a href="/dotnet-core/aspnetcore/坑坑更健康.html" class="sidebar-link">Asp .Net Core 坑集合</a></li><li><a href="/dotnet-core/aspnetcore/搭建基于Asp.NetCore-Vue的SPA项目.html" class="sidebar-link">搭建基于Asp .Net Core+Vue+IView项目</a></li><li><a href="/dotnet-core/aspnetcore/路由.html" class="sidebar-link">Asp. Net Core 路由处理过程</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="aspnetcore-中使用-newlife-identityserver4-管理-identityserver-数据"><a href="#aspnetcore-中使用-newlife-identityserver4-管理-identityserver-数据" aria-hidden="true" class="header-anchor">#</a> aspnetcore 中使用 Newlife.IdentityServer4 管理 IdentityServer 数据</h1> <ul><li>本文讲述如何实现，IdentityServer 数据的管理，包括添加删除等基础操作和相应 UI</li></ul> <h2 id="后端"><a href="#后端" aria-hidden="true" class="header-anchor">#</a> 后端</h2> <ul><li>此处直列关键点，不做详细描述，此项目跟普通的数据库管理无异，所以只做简单记录</li> <li>实例请查看<a href="https://github.com/xxred/NewLife.IdentityServer4/tree/c48d897e3e23a397bb6a5230d294cfc694dfa2a6/" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="添加引用"><a href="#添加引用" aria-hidden="true" class="header-anchor">#</a> 添加引用</h3> <ul><li>新建 asp.net core 项目，<a href="https://github.com/xxred/IdentityServer4.XCode" target="_blank" rel="noopener noreferrer">IdentityServer4.XCode<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>引用，代码入口添加服务，视自己情况而定，options 的参数需要与前端配合</li> <li>添加<a href="https://github.com/xxred/Easy.Admin" target="_blank" rel="noopener noreferrer">Easy.Admin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>引用，<code>Easy.Admin</code>包含了具有增删查改的基类控制器。并且封装了统一的响应结果，真实结果包含在 Data 属性、异常拦截处理、模型绑定等，使用后只需要关注业务即可</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;Status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Data&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;ID&quot;</span><span class="token operator">:</span> <span class="token number">68</span><span class="token punctuation">,</span>
      <span class="token property">&quot;Name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;b5c4&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;Paper&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code>            services<span class="token punctuation">.</span><span class="token function">AddIdentityServer</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
                <span class="token punctuation">{</span>
                    options<span class="token punctuation">.</span>UserInteraction<span class="token punctuation">.</span>LoginReturnUrlParameter <span class="token operator">=</span> <span class="token string">&quot;returnUrl&quot;</span><span class="token punctuation">;</span><span class="token comment">//返回url的参数名</span>

                    options<span class="token punctuation">.</span>UserInteraction<span class="token punctuation">.</span>LoginUrl <span class="token operator">=</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">;</span>

                    options<span class="token punctuation">.</span>Authentication<span class="token punctuation">.</span>CookieAuthenticationScheme <span class="token operator">=</span> <span class="token string">&quot;Jwt-Cookie&quot;</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">AddXCodeConfigurationStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">AddXCodeOperationalStore</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
                <span class="token punctuation">{</span>
                    <span class="token comment">// this enables automatic token cleanup. this is optional.</span>
                    options<span class="token punctuation">.</span>EnableTokenCleanup <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
                    <span class="token comment">// options.TokenCleanupInterval = 15; // interval in seconds. 15 seconds useful for debugging</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">AddDeveloperSigningCredential</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="添加控制器"><a href="#添加控制器" aria-hidden="true" class="header-anchor">#</a> 添加控制器</h3> <ul><li>由于引用了<a href="https://github.com/xxred/Easy.Admin" target="_blank" rel="noopener noreferrer">Easy.Admin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，我们要做的事就很简单了</li> <li>新建控制器<code>ClientsController</code>，继承自<code>EntityController&lt;Clients&gt;</code>，添加相关特性</li></ul> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    <span class="token punctuation">[</span><span class="token class-name">DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;客户端&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token class-name">Route</span><span class="token punctuation">(</span><span class="token string">&quot;api/[controller]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token class-name">ApiController</span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClientsController</span> <span class="token punctuation">:</span> <span class="token class-name">EntityController</span><span class="token operator">&lt;</span>Clients<span class="token operator">&gt;</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
</code></pre></div><ul><li>基类<code>EntityController&lt;&gt;</code>实现了基础的增改查删操作，并自带一个搜索方法 Search，前端可根据搜索实体自定义搜索，还可跨表搜索</li> <li>运行后导航到<code>/swagger</code>即可看到新增的接口</li> <li>添加其他几个控制器，参考<a href="https://github.com/xxred/NewLife.IdentityServer4/tree/c48d897e3e23a397bb6a5230d294cfc694dfa2a6/NewLife.IdentityServer4/Controllers" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="说明"><a href="#说明" aria-hidden="true" class="header-anchor">#</a> 说明</h3> <ul><li>此后端可作为内部管理使用，为所有实体添加对应的控制器，即可生成响应的增改查删接口，日常管理数据和和开发使用特别方便</li> <li>如果想基于此项目开发其它业务，直接增加接口，做好权限控制即可，目前版本不包含权限管理</li></ul> <h2 id="前端"><a href="#前端" aria-hidden="true" class="header-anchor">#</a> 前端</h2> <ul><li>前端项目基于<a href="https://github.com/xxred/Easy.Front-End" target="_blank" rel="noopener noreferrer">xxred/Easy.Front-End<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，他改造自<a href="https://github.com/PanJiaChen/vue-element-admin/" target="_blank" rel="noopener noreferrer">PanJiaChen/vue-element-admin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。产生于 vue-element-admin 还没升级到 vue-cli3 的时候，删了不少功能，架子大体相同，现在新版全部升级，v4.0 也发布了，Easy.Front-End 就不必再看了</li> <li>Easy.Front-End 主要考虑为基础框架，导入包引用即可使用，后续更新只需更新包的版本，而不必手动复制粘贴源码</li> <li>重大修改的地方，只是为了搭建 IdentityServer 的前端部分，主要包括 api 地址重新设置、后端获取路由动态生成菜单、根据基础表格表单页动态生成页面</li></ul> <h3 id="api-地址重新设置"><a href="#api-地址重新设置" aria-hidden="true" class="header-anchor">#</a> api 地址重新设置</h3> <ul><li>这个功能其实意义不大，覆盖原系统的硬编码 api 地址，现在一般都是从头到尾自己搭建前端项目，复制框架源码的，很少是导入包直接用。当时为了两边调试方便所以做了，先说说怎么用</li> <li>Easy.Front-End 项目 src 文件夹下有个<code>apiSettings.js</code>文件，新建项目同样的位置也需要一个这样的文件，手动导入，更新接口，内容如下</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> login <span class="token operator">=</span> <span class="token punctuation">{</span>
  loginByUsername<span class="token punctuation">:</span> <span class="token string">'/api/users/login'</span><span class="token punctuation">,</span>
  logout<span class="token punctuation">:</span> <span class="token string">'/api/users/logout'</span><span class="token punctuation">,</span>
  getUserInfo<span class="token punctuation">:</span> <span class="token string">'/api/users/getuserinfo'</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token punctuation">{</span>
  getRoutes<span class="token punctuation">:</span> <span class="token string">'/api/routes'</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token parameter">settings</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  settings<span class="token punctuation">.</span>baseUrl <span class="token operator">=</span> <span class="token string">'https://localhost:44352'</span>
  settings<span class="token punctuation">.</span>login <span class="token operator">=</span> login
  settings<span class="token punctuation">.</span>route <span class="token operator">=</span> route
  <span class="token keyword">return</span> settings
<span class="token punctuation">}</span>
</code></pre></div><ul><li>只需要重新定义对象进行覆盖即可。导出的是一个函数，因此可以调试到此文件，可查看到所有接口，根据自己的需要进行覆盖</li></ul> <h3 id="后端获取路由动态生成菜单"><a href="#后端获取路由动态生成菜单" aria-hidden="true" class="header-anchor">#</a> 后端获取路由动态生成菜单</h3> <ul><li>此功能需要后端配合，返回类似路由的格式，再由前端进行处理组件部分</li> <li>后端返回数据结构如下</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/ApiResources&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;component&quot;</span><span class="token operator">:</span> <span class="token string">&quot;views/layout/Layout&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;template&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;table-base table-name=\&quot;ApiResources\&quot; /&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">//</span><span class="token property">&quot;component&quot;</span><span class="token operator">:</span> <span class="token string">&quot;views/components/test&quot;</span><span class="token punctuation">,</span> component为空，取template
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ApiResources&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;meta&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Api资源&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;international&quot;</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>前端接收到数据，将组件有字符路径换成方法，或者指定模板，要点如下。具体参见<a href="https://github.com/xxred/Easy.Front-End/tree/a8e42f1f873598ebd05711bcc31dcc67f0618b4e/src/store/modules/permission.js" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>要使用模板功能，<code>vue.config.js</code>配置文件必须设置<code>runtimeCompiler</code>为 true</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>router<span class="token punctuation">.</span>component<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> component <span class="token operator">=</span> router<span class="token punctuation">.</span>component
  router<span class="token punctuation">.</span><span class="token function-variable function">component</span> <span class="token operator">=</span> <span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 动态加载组件会编译加载项目所有组件</span>
    <span class="token comment">// 这里不能全写变量，写开头确定起始地址，写结尾确定文件名</span>
    <span class="token comment">// 这样就相当于编译'@/**/*.vue'，编译之后模块列表才会有所有的模块，传模块路径匹配才会命中</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'@/'</span> <span class="token operator">+</span> component <span class="token operator">+</span> <span class="token string">'.vue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> resolve<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>router<span class="token punctuation">.</span>template<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  router<span class="token punctuation">.</span><span class="token function-variable function">component</span> <span class="token operator">=</span> <span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token punctuation">:</span> router<span class="token punctuation">.</span>template
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="根据基础表格表单页动态生成页面"><a href="#根据基础表格表单页动态生成页面" aria-hidden="true" class="header-anchor">#</a> 根据基础表格表单页动态生成页面</h3> <ul><li>这个功能需要后端返回每个表的信息，字段名和展示名、数据类型等，这个数据格式自己定，简单随意就好</li> <li>页面代码如下</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table</span> <span class="token attr-name">v-loading</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>listLoading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dataList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>
    <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(column, idx) in columns<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>idx<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>column.displayName<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:prop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>column.name<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">/&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>
    <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>操作<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>230<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">fixed</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">class-name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>small-padding fixed-width<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scope<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>handleUpdate(scope.row)<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">&gt;</span></span>编辑<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span>
      <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span>
        <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scope.row.status != 'deleted'<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>danger<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>handleDelete(scope.row)<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span>
      <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--以下是表单页--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form</span>
  <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>dataForm<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">:model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>temp<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">label-position</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">label-width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>120px<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name">
  <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span> <span class="token property">margin-left</span><span class="token punctuation">:</span>50px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span>
    <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(column, idx) in columns<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>idx<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>column.displayName<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:prop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>column.name<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-switch</span>
      <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>column.typeStr=='Boolean'<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>temp[column.name]<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name">
      <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">display</span><span class="token punctuation">:</span> block</span><span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">active-color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#13ce66<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">inactive-color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#ff4949<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">active-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>是<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">inactive-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>否<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-date-picker</span>
      <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>column.typeStr=='DateTime'<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>temp[column.name]<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>datetime<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>yyyy-MM-dd HH:mm:ss<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>选择日期时间<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span>
      <span class="token attr-name">v-else</span>
      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>temp[column.name]<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>请输入'+column.displayName<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>使用的时候，后端返回的路由数据，不要设置<code>component</code>，而将<code>template</code>设置为<code>&lt;table-base table-name=\&quot;{name}\&quot; /&gt;</code>，其中的 name 动态替换</li> <li>注册全局组件<a href="https://github.com/xxred/Easy.Front-End/blob/a8e42f1f873598ebd05711bcc31dcc67f0618b4e/src/views/common/tableBase.vue" target="_blank" rel="noopener noreferrer">table-base<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 注册全局table基础组件</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'table-base'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/components/tableBase.vue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="最后"><a href="#最后" aria-hidden="true" class="header-anchor">#</a> 最后</h2> <ul><li><a href="https://github.com/xxred/NewLife.IdentityServer4" target="_blank" rel="noopener noreferrer">Newlife.IdentityServer4<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>作为后端部分，引用 <a href="https://github.com/xxred/Easy.Admin" target="_blank" rel="noopener noreferrer">Easy.Admin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，简化基础工作，一键生成 curd 接口，专注业务，提供所有表字段信息以供动态生成菜单和页面</li> <li><a href="https://github.com/xxred/NewLife.IdentityServer4.Vue" target="_blank" rel="noopener noreferrer">Newlife.IdentityServer4.Vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>作为前端部分，引用<a href="https://github.com/xxred/Easy.FrontEnd" target="_blank" rel="noopener noreferrer">Easy.FrontEnd<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，根据一些表和列信息，生成相应菜单和页面，几乎没有页面需要手写</li></ul> <h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2> <ul><li>Newlife.IdentityServer4 只是对 IdentityServer 数据简单管理，未来将会增加权限控制，前端优化页面，改善引导方便使用</li> <li>开发中遇到的坑，大都是自己异想天开，新增的功能参考很少，但是自身弄清楚原理，导致一直不成功</li> <li>磨刀不误砍柴工，基础夯实，才能走的更远！</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/xxred/xxred.github.io/edit/master/docs/dotnet-core/aspnetcore/newlife-identityserver4-in-aspnetcore.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">5/7/2019, 8:43:53 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/dotnet-core/aspnetcore/health-checks.html" class="prev">
          asp.net core 健康检查
        </a></span> <span class="next"><a href="/dotnet-core/aspnetcore/persistence-identity-server-4-with-newLife-xcode.html">
          使用 NewLife.XCode 持久化 IdentityServer4
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6bc962bd.js" defer></script><script src="/assets/js/2.968fe051.js" defer></script><script src="/assets/js/55.600a1096.js" defer></script>
  </body>
</html>
