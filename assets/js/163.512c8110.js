(window.webpackJsonp=window.webpackJsonp||[]).push([[163],{246:function(t,e,a){"use strict";a.r(e);var n=a(0),s=Object(n.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"微软开源的文档工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#微软开源的文档工具","aria-hidden":"true"}},[t._v("#")]),t._v(" 微软开源的文档工具")]),t._v(" "),a("p",[t._v("[TOC]")]),t._v(" "),a("h2",{attrs:{id:"什么是docfx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是docfx","aria-hidden":"true"}},[t._v("#")]),t._v(" 什么是DocFX")]),t._v(" "),a("p",[t._v("DocFX是.NET的API文档生成器，目前支持C＃和VB。它从源代码中的三重斜杠注释生成API参考文档。它还允许您使用Markdown文件创建其他主题，如教程和操作方法，以及自定义生成的参考文档。 DocFX从源代码和Markdown文件构建静态HTML网站，可以轻松地托管在任何Web服务器上（例如，github.io）。此外，DocFX还可以灵活地通过模板自定义网站的布局和样式。如果您有兴趣使用自己的样式创建自己的网站，可以按照如何创建自定义模板 创建自定义模板。")]),t._v(" "),a("p",[t._v("DocFX还具有以下很酷的功能：")]),t._v(" "),a("ul",[a("li",[t._v("与您的源代码集成。您可以单击API上的“查看源”以导航到GitHub中的源代码（您的源代码必须推送到GitHub）。")]),t._v(" "),a("li",[t._v("跨平台支持。我们有一个在Windows上本机运行的exe版本，在Mono上它也可以在Linux和macOS上运行。")]),t._v(" "),a("li",[t._v("与Visual Studio集成。您可以在Visual Studio中无缝使用DocFX。")]),t._v(" "),a("li",[t._v("降价扩展。我们引入了DocFX Flavored Markdown（DFM）来帮助您编写API文档。DFM 与GitHub Flavored Markdown（GFM）100％兼容，具有一些有用的扩展，如文件包含，代码片段，交叉引用和yaml标头。有关DFM的详细说明，请参阅"),a("a",{attrs:{href:"http://dotnet.github.io/docfx/spec/docfx_flavored_markdown.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("DFM"),a("OutboundLink")],1),t._v("。")])]),t._v(" "),a("h2",{attrs:{id:"一些教程资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一些教程资源","aria-hidden":"true"}},[t._v("#")]),t._v(" 一些教程资源")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://dotnet.github.io/docfx/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/lindexi_gd/article/details/78661304",target:"_blank",rel:"noopener noreferrer"}},[t._v("docfx 做一个和微软一样的文档平台"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/docascode/docfx-seed",target:"_blank",rel:"noopener noreferrer"}},[t._v("种子项目（与AppVeyor集成的示例）"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"基础搭建，配合appveyor部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基础搭建，配合appveyor部署","aria-hidden":"true"}},[t._v("#")]),t._v(" 基础搭建，配合appveyor部署")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://xxred.gitee.io/docfx/tutorial/docfx_getting_started.html#2-use-docfx-as-a-command-line-tool",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装docfx(官网比较慢我自己克隆了一份教程)"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://xxred.gitee.io/docfx/tutorial/docfx.exe_user_manual.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("命令使用"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"创建并运行docfx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建并运行docfx","aria-hidden":"true"}},[t._v("#")]),t._v(" 创建并运行docfx")]),t._v(" "),a("ul",[a("li",[t._v("首先在github上创建一个项目，然后克隆到本地，方便后面直接提交，并且也需要用到这个地址")]),t._v(" "),a("li",[t._v("命令行执行"),a("code",[t._v("docfx init")]),t._v("，感受一下都有什么配置")]),t._v(" "),a("li",[t._v("最后会产生一个项目"),a("code",[t._v("docfx_project")]),t._v("，然后执行"),a("code",[t._v("docfx docfx_project\\docfx.json --serve")])]),t._v(" "),a("li",[t._v("顺利的话，访问"),a("a",{attrs:{href:"http://localhost:8080",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://localhost:8080"),a("OutboundLink")],1),t._v("就可以看到结果了")])]),t._v(" "),a("h3",{attrs:{id:"appveyor文件配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#appveyor文件配置","aria-hidden":"true"}},[t._v("#")]),t._v(" appveyor文件配置")]),t._v(" "),a("ul",[a("li",[t._v("在"),a("code",[t._v("docfx_project")]),t._v("文件夹创建文件"),a("code",[t._v("appveyor.yml")])]),t._v(" "),a("li",[t._v("粘贴以下内容")])]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 环境变量，在这里声明，下面使用")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("op_build_user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"OpenPublishBuild"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("op_build_user_email")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vscopbld@microsoft.com"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("access_token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("secure")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bCtIcPHYlrOYLppEVAH8R4VZpAWou5dKlDhbEPyXfgmI9wEMvH4MD0fFXYrv5sLS\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Visual Studio 2017 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 镜像，也就是所依赖的环境")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("init")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 初始化")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" git config "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("global core.aurocrlf true "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#自动完成标准化与转换（CRLF 与 LF 自动转换）")]),t._v("\n  \n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("install")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以下通过choco安装docfx")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n        if(-Not $env:APPVEYOR_PULL_REQUEST_TITLE)\n        {\n            git checkout $env:APPVEYOR_REPO_BRANCH -q\n            choco install docfx -y\n            # choco install nuget.commandline -y\n        }")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build_script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 构建生成")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v('\n        if(-Not $env:APPVEYOR_PULL_REQUEST_TITLE)\n        {\n            #-----------利用docfx命令生成html-----------------------------------------------------start\n            # & nuget install docfx.console -Version 2.18.4 -Source https://www.myget.org/F/docfx/api/v3/index.json\n            # & docfx.console.2.18.4\\tools\\docfx docfx.json\n            & docfx docfx.json\n            if ($lastexitcode -ne 0){\n              throw [System.Exception] "docfx build failed with exit code $lastexitcode."\n            }\n            #-----------利用docfx命令生成html-------------------------------------------------------end\n        }')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 编译.net项目，这里暂时用不到，先注释")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  - msbuild src/SampleClass1/SampleClass1.sln")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on_success")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 成功构建之后部署")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以下就是配置git账号和token，将最终生成的html部署（提交）到你的站点（仓库），")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v('\n        if(-Not $env:APPVEYOR_PULL_REQUEST_TITLE)\n        {\n            #-----------配置git账号信息，使用到的就是上面的环境变量----------------------------------start\n            git config --global credential.helper store\n            Add-Content "$env:USERPROFILE\\.git-credentials" "https://$($env:access_token):x-oauth-basic@github.com`n"\n            git config --global user.email $env:op_build_user_email\n            git config --global user.name $env:op_build_user\n            #-----------配置git账号信息，使用到的就是上面的环境变量------------------------------------end')]),t._v("\n\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#-----------这里就是部署的地方，克隆你项目的pages分支，复制生成的html然后提交--------------start")]),t._v("\n            git clone https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//github.com/xxred/docfx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("example.git "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("b gh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages origin_site "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("q\n            Copy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("Item origin_site/.git _site "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("recurse\n            CD _site\n            git add "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("A 2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&1")]),t._v("\n            git commit "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('m "CI Updates" '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("q\n            git push origin gh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("q\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#-----------这里就是部署的地方，克隆你项目的pages分支，复制生成的html然后提交----------------end")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("以上"),a("code",[t._v("access_token")]),t._v("那里换成自己的，怎么来的呢？首先"),a("a",{attrs:{href:"https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/",target:"_blank",rel:"noopener noreferrer"}},[t._v("创建一个"),a("OutboundLink")],1),t._v("，"),a("a",{attrs:{href:"https://ci.appveyor.com/tools/encrypt",target:"_blank",rel:"noopener noreferrer"}},[t._v("然后加密"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("token这个我有想到，直接提交在源码这里岂不是大家都能拿来用？后面看看原来有个加密，appveyor使用的时候再解密，所以上面"),a("code",[t._v("$($env:access_token)")]),t._v("还有个"),a("code",[t._v("$()")]),t._v("包着，所以可以放心的将一些私密性的字符加密再放上去。")]),t._v(" "),a("li",[t._v("倒数大概七行这样子，"),a("code",[t._v("git clone")]),t._v("后面的地址换成自己的地址，因为再下面需要提交，没错，利用上面的access_token作为身份证")]),t._v(" "),a("li",[t._v("上面只有两个操作，更多操作请移步"),a("a",{attrs:{href:"https://www.appveyor.com/docs/build-configuration/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),a("OutboundLink")],1),t._v("，了解整个过程")])]),t._v(" "),a("h3",{attrs:{id:"提交"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提交","aria-hidden":"true"}},[t._v("#")]),t._v(" 提交")]),t._v(" "),a("ul",[a("li",[t._v("将"),a("code",[t._v("docfx_project")]),t._v("项目里面的文件剪切到你克隆下来的项目的根目录，相当于去掉"),a("code",[t._v("docfx_project")]),t._v("文件夹，然后提交")]),t._v(" "),a("li",[t._v("创建一个分支"),a("code",[t._v("gh-pages")]),t._v("用来发布静态文件，避免跟源文件同一个分支")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" branch gh-pages\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout gh-pages\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin gh-pages\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout master\n")])])]),a("h3",{attrs:{id:"appveyor最后配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#appveyor最后配置","aria-hidden":"true"}},[t._v("#")]),t._v(" appveyor最后配置")]),t._v(" "),a("ul",[a("li",[t._v("打开"),a("a",{attrs:{href:"https://ci.appveyor.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("appveyor官网"),a("OutboundLink")],1),t._v("，并使用github账号直接登陆")]),t._v(" "),a("li",[t._v("找到并点击"),a("code",[t._v("projects")])]),t._v(" "),a("li",[t._v("接着点击"),a("code",[t._v("NEW PROJECT")]),t._v("，在github那一栏，选择上面创建的项目，鼠标放在上面并点击"),a("code",[t._v("Add")])]),t._v(" "),a("li",[t._v("然后再选择的这个项目的面板，点击"),a("code",[t._v("NEW BUILD")])])]),t._v(" "),a("h3",{attrs:{id:"更多"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更多","aria-hidden":"true"}},[t._v("#")]),t._v(" 更多")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.appveyor.com/docs/environment-variables/",target:"_blank",rel:"noopener noreferrer"}},[t._v("环境变量"),a("OutboundLink")],1)])])])},[],!1,null,null,null);e.default=s.exports}}]);