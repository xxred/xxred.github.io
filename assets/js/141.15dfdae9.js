(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{265:function(t,_,v){"use strict";v.r(_);var r=v(0),a=Object(r.a)({},function(){var t=this,_=t.$createElement,v=t._self._c||_;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h1",{attrs:{id:"微信支付"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#微信支付","aria-hidden":"true"}},[t._v("#")]),t._v(" 微信支付")]),t._v(" "),v("h2",{attrs:{id:"支付介绍与流程"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#支付介绍与流程","aria-hidden":"true"}},[t._v("#")]),t._v(" 支付介绍与流程")]),t._v(" "),v("ul",[v("li",[t._v("微信支付文档 https://pay.weixin.qq.com/wiki/doc/api/native.php?chapter=6_5")]),t._v(" "),v("li",[t._v("以扫码支付为例，倒着讲。以下服务端均指咱们自己的服务器服务端")]),t._v(" "),v("li",[t._v("扫描二维码支付之前，服务端需要调用微信下单的 api，得到二维码 url，这一步需要注意几个参数：")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",[t._v("字段名")]),t._v(" "),v("th",[t._v("变量名")]),t._v(" "),v("th",[t._v("必填")]),t._v(" "),v("th",[t._v("类型")]),t._v(" "),v("th",[t._v("示例值")]),t._v(" "),v("th",[t._v("描述")])])]),t._v(" "),v("tbody",[v("tr",[v("td",[t._v("公众账号 ID")]),t._v(" "),v("td",[t._v("appid")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("wxd678efh567hg6787")]),t._v(" "),v("td",[t._v("微信支付分配的公众账号 ID（企业号 corpid 即为此 appId）")])]),t._v(" "),v("tr",[v("td",[t._v("商户号")]),t._v(" "),v("td",[t._v("mch_id")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("1230000109")]),t._v(" "),v("td",[t._v("微信支付分配的商户号")])]),t._v(" "),v("tr",[v("td",[t._v("签名")]),t._v(" "),v("td",[t._v("sign")]),t._v(" "),v("td",[t._v("是")]),t._v(" "),v("td",[t._v("String(32)")]),t._v(" "),v("td",[t._v("C380BEC2BFD727A4B6845133519F3AD6")]),t._v(" "),v("td",[t._v("通过签名算法计算得出的签名值，详见签名生成算法")])])])]),t._v(" "),v("ul",[v("li",[t._v("url 做成二维码，微信扫描支付成功后，微信提示支付成功，微信异步通知服务端，服务端收到通知回复收到了，收不到自行查询订单信息，最后修改订单状态")]),t._v(" "),v("li",[t._v("大部分流程均基于此流程，其中扫码支付的模式一，是由用户扫静态二维码微信通知服务端发起的下单请求，以上流程是用户主动请求服务端发起下单请求，其他模式均可借鉴，目的都是让服务端向微信发起下单请求")]),t._v(" "),v("li",[t._v("另一差异就是支付的差异，下单后都得到了 url，可生成二维码供微信客户端扫描，即扫码支付。此链接直接在微信内打开，直接调用支付，即小程序、公众号等支付。手机 app 或者 h5 支付则是唤起微信客户端调用支付")]),t._v(" "),v("li",[t._v("相关时序图参考开发文档")])])])},[],!1,null,null,null);_.default=a.exports}}]);